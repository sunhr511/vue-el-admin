webpackJsonp([5],{GRXz:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("woOf"),r=t.n(n),s=t("fZjL"),l=t.n(s),i=t("E4LH"),o=t("vMJZ"),c=t("lbHh"),u=t.n(c),d={data:function(){return{loading:!1,tableData:[],currentPage:1,pageSize:20,total:null,searchValue:"",searchParams:{},tableStatus:2,editBeforeUsername:"",editBeforeRealname:"",channelForm:{},centerDialogVisible:!1,rules:{relname:[{required:!0,message:"用户名称不能为空",trigger:"blur"}],username:[{required:!0,trigger:"blur",validator:i.b}],pwd:[{required:!0,trigger:"blur",validator:i.a}]}}},created:function(){this.nowUserId=u.a.get("id"),this.getTableData()},methods:{handDisable:function(e,a){var t=this,n={pcId:a.id,status:1===this.tableStatus?2:1};Object(o.b)(n).then(function(e){e.success?(t.getTableData(),t.$message({type:"success",message:1===t.tableStatus?"已禁用":"已启用"})):t.$message({type:"error",message:e.data.errorMessage})})},getTableData:function(e){var a=this,t={status:this.tableStatus,pageNo:e||this.currentPage,pageSize:this.pageSize};this.loading=!0,l()(this.searchParams).length&&r()(t,this.searchParams),Object(o.c)(t).then(function(e){a.loading=!1,e.success&&(a.tableData=e.list,a.total=e.total,a.currentPage=e.pageNo)})},searchInfo:function(){this.searchParams=this.searchValue?{relname:this.searchValue}:{},this.getTableData(1)},handleCurrentChange:function(e){this.getTableData(e)},handleEdit:function(e,a){this.editBeforeUsername=a.username,this.editBeforeRealname=a.realname,this.channelForm={pcId:a.id,pwd:a.password,relname:a.realname,username:a.username},this.centerDialogVisible=!0},editfun:function(e){var a=this;this.$refs[e].validate(function(e){if(e){var t=r()({},a.channelForm);t.realname===a.editBeforeRealname&&delete t.realname,t.username===a.editBeforeUsername&&delete t.username,Object(o.b)(t).then(function(e){e.success?(a.centerDialogVisible=!1,a.channelForm={},a.$message({type:"success",message:"编辑成功！"}),a.getTableData(a.currentPage),parseInt(u.a.get("id"))===parseInt(t.pcId)&&u.a.set("password",t.pwd)):a.$message({type:"error",message:e.data.errorMessage})})}})}}},m={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"staffList"},[t("div",{staticClass:"mini-search"},[t("el-input",{attrs:{placeholder:"请输入用户名称"},nativeOn:{keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key))return null;e.searchInfo(a)}},model:{value:e.searchValue,callback:function(a){e.searchValue=a},expression:"searchValue"}},[t("template",{slot:"append"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchInfo}},[e._v("搜 索")])],1)],2)],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[t("el-table-column",{attrs:{prop:"id",label:"用户ID"}}),e._v(" "),t("el-table-column",{attrs:{prop:"realname",label:"姓名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"username",label:"账号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"password",label:"密码"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[e.nowUserId!=a.row.id?t("el-button",{attrs:{size:"mini",type:1===e.tableStatus?"danger":"success"},on:{click:function(t){e.handDisable(a.$index,a.row)}}},[e._v(e._s(1===e.tableStatus?"禁用":"启用"))]):e._e(),e._v(" "),t("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){e.handleEdit(a.$index,a.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),t("el-dialog",{attrs:{title:"编辑信息",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(a){e.centerDialogVisible=a}}},[t("el-form",{ref:"channelForm",staticClass:"demo-ruleForm",attrs:{model:e.channelForm,rules:e.rules,"label-width":"50px"}},[t("el-form-item",{attrs:{label:"姓名",prop:"relname"}},[t("el-input",{attrs:{type:"text","auto-complete":"off"},model:{value:e.channelForm.relname,callback:function(a){e.$set(e.channelForm,"relname","string"==typeof a?a.trim():a)},expression:"channelForm.relname"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"帐号",prop:"username"}},[t("el-input",{attrs:{"auto-complete":"off",placeholder:"建议使用非中文字符"},model:{value:e.channelForm.username,callback:function(a){e.$set(e.channelForm,"username",a)},expression:"channelForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.channelForm.pwd,callback:function(a){e.$set(e.channelForm,"pwd",a)},expression:"channelForm.pwd"}})],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.editfun("channelForm")}}},[e._v("确 定")])],1)],1),e._v(" "),t("div",{staticClass:"block"},[t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var p=t("VU/8")(d,m,!1,function(e){t("oprE")},"data-v-8c7b11d2",null);a.default=p.exports},nTX5:function(e,a,t){(e.exports=t("FZ+f")(!1)).push([e.i,"",""])},oprE:function(e,a,t){var n=t("nTX5");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t("rjj0")("027a37cc",n,!0)}});